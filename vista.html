<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8">
<title>Explora - Vista de Radio</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<style>
body {
  font-family: Arial, Helvetica, sans-serif;
  background: #f2f4f6;
  padding: 15px;
  color: #222;
}

.card {
  background: white;
  padding: 12px;
  border-radius: 8px;
  border: 1px solid #ddd;
  margin-top: 10px;
}

h2 {
  margin-bottom: 8px;
}

b {
  color: #2563eb;
}
</style>
</head>

<body>

<h2>üì° Informaci√≥n del Radio</h2>
<div id="contenido" class="card">Cargando informaci√≥n...</div>

<script>
// üëá PEGA LA MISMA URL QUE USAS EN EL INDEX
const API_URL = "PON_AQUI_TU_URL_DE_APPS_SCRIPT";

function obtenerParametro(nombre) {
  const urlParams = new URLSearchParams(window.location.search);
  return urlParams.get(nombre);
}

function formatFecha(f) {
  if (!f) return "";
  const d = new Date(f);
  if (isNaN(d)) return f;
  return d.toLocaleDateString("es-CL") + " " + d.toLocaleTimeString("es-CL");
}

function cargarDatos() {
  const id = obtenerParametro("id");

  if (!id) {
    document.getElementById("contenido").innerHTML =
      "‚ö† No se recibi√≥ ning√∫n ID en la URL.";
    return;
  }

  fetch(`${API_URL}?id=${id}`)
    .then(resp => resp.json())
    .then(data => {

      if (data.error) {
        document.getElementById("contenido").innerHTML =
          "‚ùå No se encontr√≥ el registro para este ID.";
        return;
      }

      document.getElementById("contenido").innerHTML = `
        <h3>${data[0]}</h3>

        <p><b>Empresa:</b> ${data[1]}</p>
        <p><b>Solicitante:</b> ${data[2]}</p>
        <p><b>OC:</b> ${data[3]}</p>
        <p><b>Lugar operaci√≥n:</b> ${data[4]}</p>
        <p><b>T√©cnico:</b> ${data[5]}</p>
        <p><b>Motivo intervenci√≥n:</b> ${data[6]}</p>
        <p><b>Patente:</b> ${data[7]}</p>
        <p><b>Veh√≠culo:</b> ${data[8]} / ${data[9]} / ${data[10]} / ${data[11]}</p>

        <hr>

        <p><b>Modelo radio:</b> ${data[12]}</p>
        <p><b>Serie radio:</b> ${data[13]}</p>
        <p><b>Tipo servicio:</b> ${data[14]}</p>

        <hr>

        <p><b>Fecha venta:</b> ${formatFecha(data[15])}</p>
        <p><b>Fecha instalaci√≥n:</b> ${formatFecha(data[16])}</p>
        <p><b>Pr√≥x mantenci√≥n:</b> ${formatFecha(data[17])}</p>

        <hr>

        <p><b>Observaciones:</b> ${data[18]}</p>
        <p><b>Fecha registro:</b> ${formatFecha(data[19])}</p>
      `;
    })
    .catch(err => {
      document.getElementById("contenido").innerHTML =
        "‚ö† Error al conectar con la base de datos.";
      console.error(err);
    });
}

cargarDatos();
</script>
</body>
</html>
